<header class="header">
  <nav class="nav">
    <div class="logo">
      {{- $label_text := (site.Params.label.text | default site.Title) }}
      {{- if site.Title }}
      <a href="{{ "" | absLangURL }}" accesskey="h" title="{{ $label_text }} (Alt + H)">
        {{- if site.Params.label.icon }}
          {{- $img := resources.Get site.Params.label.icon }}
          {{- if $img }}
            {{- $processableFormats := (slice "jpg" "jpeg" "png" "tif" "bmp" "gif" "webp") }}
            {{- $prod := (hugo.IsProduction | or (eq site.Params.env "production")) }}
            {{- if and (in $processableFormats $img.MediaType.SubType) (eq $prod true) }}
              {{- if site.Params.label.iconHeight }}
                {{- $img = $img.Resize (printf "x%d" site.Params.label.iconHeight) }}
              {{ else }}
                {{- $img = $img.Resize "x30" }}
              {{- end }}
            {{- end }}
            <img src="{{ $img.Permalink }}" alt="logo"
              height="{{ site.Params.label.iconHeight | default "30" }}">
          {{- else }}
            <img src="{{ site.Params.label.icon | absURL }}" alt="logo"
              height="{{ site.Params.label.iconHeight | default "30" }}">
          {{- end }}
        {{- end }}
        {{ $label_text }}
      </a>
      {{- end }}
    </div>

    <!-- Theme toggle -->
    {{- if (not site.Params.disableThemeToggle) }}
    <button id="theme-toggle" title="Toggle theme" aria-label="Toggle theme">
      ðŸŒ™
    </button>
    {{- end }}

    <!-- Hamburger Icon -->
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>

    <!-- Main Menu -->
    <ul id="menu">
      {{- $currentPage := . }}
      {{- range site.Menus.main }}
      {{- $menu_item_url := (cond (strings.HasSuffix .URL "/") .URL (printf "%s/" .URL)) | absLangURL }}
      {{- $page_url := $currentPage.Permalink | absLangURL }}
      <li>
        <a href="{{ .URL | absLangURL }}">
          <span {{ if eq $menu_item_url $page_url }}class="active"{{ end }}>
            {{ .Name }}
          </span>
        </a>
      </li>
      {{- end }}
    </ul>
  </nav>

  <script>
    function toggleMenu() {
      const menu = document.getElementById("menu");
      menu.classList.toggle("open");
    }
  </script>
</header>
